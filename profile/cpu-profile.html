<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>javascript cpu profile</title>
<script type="text/javascript">

var intId;
var count = 0;

function print(msg){
  var out = document.getElementById("log-div");
  out.innerHTML = msg;
}

function loadComplete(){
}

function consume(){
  var i, j, k;
  for (i = 0; i < 1000; i++)
    for (j = 0; j < 1000; j++)
      for( k = 0; k < 1000; k++){
        var sum = i + j + k;
      }
}

function task1(){
  consume();
}

function task2(){
  consume();
}

function useCPU(){
  print(count++);
  task1();
  task2();
}

function peroidUseCPU(){
  intId = setInterval(useCPU, 1000);
}

function stopUseCPU(){
  clearInterval(intId);
}

function start(){
  peroidUseCPU();
}

function stop(){
  stopUseCPU();
}

</script>
</head>

<body onload="loadComplete()">
<div>
  <button onclick="start()">start</button>
  <button onclick="stop()">stop</button>
</div>
<div id="log-div">
</div>
</body>
</html>
